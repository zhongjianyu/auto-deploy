<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="../../plugins/layui/css/layui.css" media="all" />
<link rel="stylesheet" href="../../css/global.css" media="all">
<link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="../../css/table.css" />
</head>
<body>
	<input type="hidden" name="${_csrf.parameterName}" id="${_csrf.parameterName}" value="${_csrf.token}" />
	<div class="admin-main" style="margin: 10px;">
		<blockquote class="layui-elem-quote" style="padding: 5px;">
			<form class="layui-form" action="">
				<div class="layui-input-inline">
					<input type="text" name="searchKey" id="searchKey" placeholder="输入项目名称描述关键字" autocomplete="off" class="layui-input"
						style="height: 30px; line-height: 30px;">
				</div>
				<span><@a code="000101" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="loadData()" iclass="layui-icon"
					icon="&#xe615;" text="搜索"/></span>
				<div style="float: right;">
					<span><@a code="000102" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="openAddWin()" iclass="layui-icon"
						icon="&#xe608;" text="新增"/></span>
				</div>
			</form>
		</blockquote>
		<div class="layui-field-box layui-form" style="padding-bottom: 22px; padding-left: 0px; padding-right: 0px; padding-top: 0px;">
			<table class="layui-table admin-table">
				<thead>
					<tr>
						<th style="width: 20px;"><input type="checkbox" lay-skin="primary" lay-filter="paging_check-all"></th>
						<th>项目名称</th>
						<th>分组名称</th>
						<th>SSH地址</th>
						<th>项目描述</th>
						<th>是否激活</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody id="paging-data">
					<script id="paging-script" type="text/html">
					{{each records value index}}
						<tr>
							<td><input type="checkbox" lay-skin="primary" class="check-id" id="{{value.id}}"></td>
							<td>{{value.projectName}}</td>
							<td>{{value.groupName}}</td>
							<td>{{value.sshLink}}</td>
							<td>{{value.projectDesc}}</td>
							<td>{{if value.isActive == 1}}<font color="green">激活</font>{{/if}}{{if value.isActive == 0}}<font color="red">冻结</font>{{/if}}</td>							
							<td>
								<@a code="000103" href="javascript:void(0)" class="layui-btn layui-btn-mini" id="show-edit" onclick="showEdit('{{value.id}}')" text="编辑"/>
								<@a code="000104" href="javascript:void(0)" class="layui-btn layui-btn-warm layui-btn-mini" id="show-view" onclick="showView('{{value.id}}')" text="详情"/>
								<@a code="" href="javascript:void(0)" class="layui-btn layui-btn-normal layui-btn-mini" id="show-active" onclick="showUserSetting('{{value.id}}')" text="人员配置"/>
								<!--
								<@a code="" href="javascript:void(0)" class="layui-btn layui-btn-normal layui-btn-mini" id="show-disactive" onclick="showActive()" text="冻结"/>
								-->
								<@a code="000105" href="javascript:void(0)" class="layui-btn layui-btn-danger layui-btn-mini" id="show-delete" onclick="showDelete('{{value.id}}')" text="删除"/>
							</td>
						</tr>
					{{/each}}
					</script>
				</tbody>
			</table>
		</div>
		<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
			<div id="paging-footer" class="page" style="background-color: white; text-align: center;"></div>
		</div>
	</div>
	<!-- 新增对象窗口 -->
	<div style="padding: 10px; display: none; padding-right: 40px; z-index: 19940200;" id="win-add-object">
		<form class="layui-form layui-form-pane" id="add-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<div class="layui-form-item">
				<label class="layui-form-label">项目名称</label>
				<div class="layui-input-block">
					<input type="text" name="projectName" id="projectName" lay-verify="required" autocomplete="off" placeholder="项目名称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目描述</label>
				<div class="layui-input-block">
					<input type="text" name="projectDesc" id="projectDesc" lay-verify="required" autocomplete="off" placeholder="项目描述" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目分组</label>
				<@selectTable table="dev_project_group" layVerify="required" id="groupId" name="groupId" class="layui-input-block" def="" key="id" text="group_name" where="and is_active=1"/>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">是否激活</label>
				<@select dict="IS_ACTIVE" layVerify="required" id="isActive" name="isActive" class="layui-input-block" def=""/>
			</div>
			<div class="layui-input-block" style="margin-top: 15px;">
				<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
				<div style="float: right;">
					<button class="layui-btn" lay-submit="" lay-filter="form-add-submit">
						<i class="fa fa-save"></i> 保存
					</button>
					<button type="reset" class="layui-btn layui-btn-primary">
						<li class="fa fa-eraser"></li> 重置
					</button>
				</div>
			</div>

		</form>
	</div>
	<!-- 编辑对象窗口 -->
	<div style="padding: 10px; display: none; padding-right: 40px;" id="win-update-object">
		<form class="layui-form layui-form-pane" id="update-object-form">
			<input type="hidden" name="id" id="id">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<div class="layui-form-item">
				<label class="layui-form-label">项目名称</label>
				<div class="layui-input-block">
					<input type="text" name="projectName" id="projectName" lay-verify="required" autocomplete="off" placeholder="项目名称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目描述</label>
				<div class="layui-input-block">
					<input type="text" name="projectDesc" id="projectDesc" lay-verify="required" autocomplete="off" placeholder="项目描述" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目分组</label>
				<@selectTable table="dev_project_group" layVerify="required" id="groupId" name="groupId" class="layui-input-block" def="" key="id" text="group_name" where="and is_active=1"/>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">是否激活</label>
				<@select dict="IS_ACTIVE" layVerify="required" id="isActive" name="isActive" class="layui-input-block" def=""/>
			</div>
			<div class="layui-input-block" style="margin-top: 15px;">
				<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
				<div style="float: right;">
					<button class="layui-btn" lay-submit="" lay-filter="form-update-submit">
						<i class="fa fa-save"></i> 保存
					</button>
					<button type="reset" class="layui-btn layui-btn-primary">
						<li class="fa fa-eraser"></li> 重置
					</button>
				</div>
			</div>
		</form>
	</div>
	<!-- 详情对象窗口 -->
	<div style="padding: 10px; display: none; padding-right: 40px;" id="win-view-object">
		<form class="layui-form layui-form-pane" id="view-object-form">
			<input type="hidden" name="id" id="id">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<div class="layui-form-item">
				<label class="layui-form-label">项目名称</label>
				<div class="layui-input-block">
					<input type="text" name="projectName" id="projectName" lay-verify="required" autocomplete="off" placeholder="项目名称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目描述</label>
				<div class="layui-input-block">
					<input type="text" name="projectDesc" id="projectDesc" lay-verify="required" autocomplete="off" placeholder="项目描述" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">项目分组</label>
				<@selectTable table="dev_project_group" layVerify="required" id="groupId" name="groupId" class="layui-input-block" def="" key="id" text="group_name" where="and is_active=1"/>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">SSH地址</label>
				<div class="layui-input-block">
					<input type="text" name="sshLink" id="sshLink" lay-verify="required" autocomplete="off" placeholder="SSH地址" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">gitlab分组ID</label>
				<div class="layui-input-block">
					<input type="text" name="gitlabGroupId" id="gitlabGroupId" lay-verify="required" autocomplete="off" placeholder="gitlab分组ID" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">gitlab项目ID</label>
				<div class="layui-input-block">
					<input type="text" name="gitlabProjectId" id="gitlabProjectId" lay-verify="required" autocomplete="off" placeholder="gitlab项目ID" class="layui-input">
				</div>
			</div>
			
			<div class="layui-form-item">
				<label class="layui-form-label">是否激活</label>
				<@select dict="IS_ACTIVE" layVerify="required" id="isActive" name="isActive" class="layui-input-block" def=""/>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">版本号</label>
				<div class="layui-input-block">
					<input type="text" name="version" id="version" lay-verify="required" autocomplete="off" placeholder="昵称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">创建时间</label>
				<div class="layui-input-block">
					<input type="text" name="createTime" id="createTime" lay-verify="required" autocomplete="off" placeholder="昵称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">创建者</label>
				<div class="layui-input-block">
					<input type="text" name="createUserName" id="createUserName" lay-verify="required" autocomplete="off" placeholder="昵称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">修改时间</label>
				<div class="layui-input-block">
					<input type="text" name="lastUpdateTime" id="lastUpdateTime" lay-verify="required" autocomplete="off" placeholder="昵称" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">修改者</label>
				<div class="layui-input-block">
					<input type="text" name="lastUpdateUserName" id="lastUpdateUserName" lay-verify="required" autocomplete="off" placeholder="昵称"
						class="layui-input">
				</div>
			</div>
			<div class="layui-input-block" style="margin-top: 15px;">
				<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
			</div>
		</form>
	</div>
	<!-- 分配角色 -->
	<div id="auth-div" style="display: none; padding-left: 10px; padding-right: 10px;">
		<input type="hidden" name="userId" id="userId">
		<div class="layui-field-box layui-form" style="padding-bottom: 22px; padding-left: 0px; padding-right: 0px; padding-top: 0px;">
			<table class="layui-table">
				<tbody id="paging2-data">
					<script id="paging2-script" type="text/html">
					<tr>
						<td>
					{{each records value index}}
							<input {{if value.isCheck == 1}}checked{{/if}} type="checkbox" value="{{value.autRole.id}}" name="" title="{{value.autRole.roleName}}" style="height:40px;">
					{{/each}}
						</td>
					</tr>
					</script>
				</tbody>
			</table>
		</div>
		<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
			<div id="paging2-footer" class="page" style="background-color: white; text-align: center;"></div>
		</div>
	</div>
	
	<!-- 人员配置窗口 -->
	<div style="padding: 10px; display: none; padding-right: 40px; z-index: 19940200;" id="win-setting-object">
		<form class="layui-form layui-form-pane" id="setting-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<input type="hidden" name="id" id="id" />
			<div class="layui-form-item">
				<label class="layui-form-label">开发人员</label>
				<div class="layui-input-block">
					<@selectTable isSearch="1" layFilter="dev-user" table="aut_user" id="devUserId" name="devUserId" key="id" text="nick_name" where="and is_active=1"/>
					<div style="border:1px solid #e6e6e6;border-top-width: 0px;" id="devUserList_div"></div>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">开发测试</label>
				<div class="layui-input-block">
					<@selectTable isSearch="1" layFilter="dev-user" table="aut_user" id="testUserId" name="testUserId" key="id" text="nick_name" where="and is_active=1"/>
					<div style="border:1px solid #e6e6e6;border-top-width: 0px;" id="testUserList_div"></div>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">验收测试</label>
				<div class="layui-input-block">
					<@selectTable isSearch="1" layFilter="dev-user" table="aut_user" id="checkUserId" name="checkUserId" key="id" text="nick_name" where="and is_active=1"/>
					<div style="border:1px solid #e6e6e6;border-top-width: 0px;" id="checkUserList_div"></div>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">预发审批</label>
				<div class="layui-input-block">
					<@selectTable isSearch="1" layFilter="dev-user" table="aut_user" id="prepareUserId" name="prepareUserId" key="id" text="nick_name" where="and is_active=1"/>
					<div style="border:1px solid #e6e6e6;border-top-width: 0px;" id="prepareUserList_div"></div>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">生产审批</label>
				<div class="layui-input-block">
					<@selectTable isSearch="1" layFilter="dev-user" table="aut_user" id="produceUserId" name="produceUserId" key="id" text="nick_name" where="and is_active=1"/>
					<div style="border:1px solid #e6e6e6;border-top-width: 0px;" id="produceUserList_div"></div>
				</div>
			</div>
			<div class="layui-input-block" style="margin-top: 15px;">
				<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
				<div style="float: right;">
					<button class="layui-btn" lay-submit="" lay-filter="form-setting-submit">
						<i class="fa fa-save"></i> 保存
					</button>
					<button type="reset" class="layui-btn layui-btn-primary">
						<li class="fa fa-eraser"></li> 重置
					</button>
				</div>
			</div>

		</form>
	</div>
	<script type="text/javascript" src="../../plugins/layui/layui.js"></script>
	<script type="text/javascript" src="../../plugins/layui/lay/modules/laypage.js"></script>
	<script type="text/javascript" src="../../js/template-web.js"></script>
	<script type="text/javascript" src="../../js/jquery.js"></script>
	<script type="text/javascript" src="../../js/tool.js"></script>
	<script>
		var pform;
		//添加事件
		layui.use('form', function() {
			pform = layui.form();
			pform.on('select(isActive)', function(data) {
				//alert(data.value);
				//form.render('checkbox');
			});
			//自定义表单校验
			pform.verify();
			//监听新增提交
			pform.on('submit(form-add-submit)', function(data) {
				tool.post("../devProject/add", $("#add-object-form").serialize(), postCallBack, false);
				return false;
			});
			//监听新增提交
			pform.on('submit(form-update-submit)', function(data) {
				tool.post("../devProject/update", $("#update-object-form").serialize(), postCallBack, false);
				return false;
			});
			//监听配置人员提交
			pform.on('submit(form-setting-submit)', function(data) {
				var param = $("#setting-object-form").serialize();
				//获取各个阶段的配置的用户ID
				var devUserIds = "";
				var testUserIds = "";
				var checkUserIds = "";
				var prepareUserIds = "";
				var produceUserIds = "";
				$("#devUserList_div").find("button").each(function(){
					devUserIds += $(this).attr("id").substring(2,$(this).attr("id").length)+",";
				});
				$("#testUserList_div").find("button").each(function(){
					testUserIds += $(this).attr("id").substring(2,$(this).attr("id").length)+",";
				});
				$("#checkUserList_div").find("button").each(function(){
					checkUserIds += $(this).attr("id").substring(2,$(this).attr("id").length)+",";
				});
				$("#prepareUserList_div").find("button").each(function(){
					prepareUserIds += $(this).attr("id").substring(2,$(this).attr("id").length)+",";
				});
				$("#produceUserList_div").find("button").each(function(){
					produceUserIds += $(this).attr("id").substring(2,$(this).attr("id").length)+",";
				});
				if(devUserIds != ""){
					devUserIds = devUserIds.substring(0,devUserIds.length-1);
				}
				if(testUserIds != ""){
					testUserIds = testUserIds.substring(0,testUserIds.length-1);
				}
				if(checkUserIds != ""){
					checkUserIds = checkUserIds.substring(0,checkUserIds.length-1);
				}
				if(prepareUserIds != ""){
					prepareUserIds = prepareUserIds.substring(0,prepareUserIds.length-1);
				}
				if(produceUserIds != ""){
					produceUserIds = produceUserIds.substring(0,produceUserIds.length-1);
				}
				param = param + "&devUserIds="+devUserIds+"&testUserIds="+testUserIds+"&checkUserIds="+checkUserIds+"&prepareUserIds="+prepareUserIds+"&produceUserIds="+produceUserIds;
				//console.log(param);
				tool.post("../devProject/setActor", param, postCallBack, false);
				return false;
			});
			//下拉框监听事件
			pform.on('select(devUserId)', function(data){
				 //如果不存在则增加
				 if($("#devUserList_div").find("#u_"+data.value).length == 0){
					 var btnStr = "<button id=\"u_"+data.value+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+$(data.elem).find("option:selected").text()+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
					 $(btnStr).appendTo("#devUserList_div");
				 }
				 
			});
			pform.on('select(testUserId)', function(data){
				//如果不存在则增加
				 if($("#testUserList_div").find("#u_"+data.value).length == 0){
					 var btnStr = "<button id=\"u_"+data.value+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+$(data.elem).find("option:selected").text()+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
					 $(btnStr).appendTo("#testUserList_div");
				 }
			});
			pform.on('select(checkUserId)', function(data){
				//如果不存在则增加
				 if($("#checkUserList_div").find("#u_"+data.value).length == 0){
					 var btnStr = "<button id=\"u_"+data.value+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+$(data.elem).find("option:selected").text()+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
					 $(btnStr).appendTo("#checkUserList_div");
				 }
			});
			pform.on('select(prepareUserId)', function(data){
				//如果不存在则增加
				 if($("#prepareUserList_div").find("#u_"+data.value).length == 0){
					 var btnStr = "<button id=\"u_"+data.value+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+$(data.elem).find("option:selected").text()+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
					 $(btnStr).appendTo("#prepareUserList_div");
				 }
			});
			pform.on('select(produceUserId)', function(data){
				//如果不存在则增加
				 if($("#produceUserList_div").find("#u_"+data.value).length == 0){
					 var btnStr = "<button id=\"u_"+data.value+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+$(data.elem).find("option:selected").text()+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
					 $(btnStr).appendTo("#produceUserList_div");
				 }
			});
			//初始化出发数据加载
			loadData();
		});
		//加载数据
		function loadData() {
			var param = new Object();
			param.container = "paging";
			param.pageSize = 10;
			param.url = "../devProject/list";
			param.projectName = $("#searchKey").val();
			tool.loadpage(param);
		}
		//获取勾选数据id
		function getCheckItmes() {
			$(".check-id:checked").each(function() {
				//console.log($(this).attr("id"));
				;
			});
		}
		//打开新增对象窗口
		function openAddWin() {
			var index = layer.open({
				title : '新增',
				maxmin : false,
				type : 1,
				content : $('#win-add-object')
			});
			layer.full(index);
		}
		//新增对象回调
		function postCallBack(retMsg) {
			if (retMsg.code == 0) {
				tool.success(retMsg.message);
				loadData();
			} else {
				tool.error(retMsg.message);
			}
		}
		//编辑对象
		function showEdit(id) {
			var object = tool.getById("../devProject/getById", id);
			for ( var key in object) {
				$("#update-object-form").find("#" + key).val(object[key]);
			}
			$("#update-object-form").find("#projectName").attr("disabled", "disabled");
			$("#update-object-form").find("#groupId").attr("disabled", "disabled");
			var index = layer.open({
				title : '编辑',
				maxmin : false,
				type : 1,
				content : $('#win-update-object')
			});
			pform.render();
			layer.full(index);
		}
		//详情对象
		function showView(id) {
			var object = tool.getById("../devProject/getById", id);
			for ( var key in object) {
				$("#view-object-form").find("#" + key).val(object[key]);
			}
			$('#view-object-form :input').attr("disabled", "disabled");
			var index = layer.open({
				title : '详情',
				maxmin : false,
				type : 1,
				content : $('#win-view-object')
			});
			pform.render();
			layer.full(index);
		}
		//删除对象
		function showDelete(id) {
			layer.confirm('确定删除 ?', {
				icon : 3,
				title : '提示'
			}, function(index) {
				var retMsg = tool.deleteById("../devProject/delete", id)
				if (retMsg.code == 0) {
					tool.success(retMsg.message);
					loadData();
				} else {
					tool.error(retMsg.message);
				}
			});
		}
		//打开人员配置窗口
		function showUserSetting(projectId) {
			//重置
		    $("#win-setting-object").find("button[type='reset']").trigger("click");
			//设置项目ID
			$("#win-setting-object").find("#id").val(projectId);
			//情况上次操作记录
			$("#devUserList_div").empty();
			$("#testUserList_div").empty();
			$("#checkUserList_div").empty();
			$("#prepareUserList_div").empty();
			$("#produceUserList_div").empty();
			//获取所有用户信息
			var param = "projectId="+projectId+"&_csrf=" + $("#_csrf").val();
			tool.post("../devProjectActor/getUserListByProjectId", param, function(vo){
				var buttonStr1="";
				for(var i = 0;i < vo.devUserList.length; i++){
					var u = vo.devUserList[i];
					buttonStr1 += "<button id=\"u_"+u.id+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+u.nickName+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
				}
				var buttonStr2="";
				for(var i = 0;i < vo.testUserList.length; i++){
					var u = vo.testUserList[i];
					buttonStr2 += "<button id=\"u_"+u.id+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+u.nickName+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
				}
				var buttonStr3="";
				for(var i = 0;i < vo.checkUserList.length; i++){
					var u = vo.checkUserList[i];
					buttonStr3 += "<button id=\"u_"+u.id+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+u.nickName+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
				}
				var buttonStr4="";
				for(var i = 0;i < vo.prepareUserList.length; i++){
					var u = vo.prepareUserList[i];
					buttonStr4 += "<button id=\"u_"+u.id+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+u.nickName+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
				}
				var buttonStr5="";
				for(var i = 0;i < vo.produceUserList.length; i++){
					var u = vo.produceUserList[i];
					buttonStr5 += "<button id=\"u_"+u.id+"\" class=\"layui-btn layui-btn-primary layui-btn-small\" onclick=\"return false;\" style=\"cursor: text;margin: 2px;\">"+u.nickName+"&nbsp;&nbsp;<i class=\"layui-icon layui-tab-close\" style=\"color: red;cursor: pointer;\" onclick=\"deleteMe(this)\">ဆ</i></button>";
				}
				
				$(buttonStr1).appendTo("#devUserList_div");
				$(buttonStr2).appendTo("#testUserList_div");
				$(buttonStr3).appendTo("#checkUserList_div");
				$(buttonStr4).appendTo("#prepareUserList_div");
				$(buttonStr5).appendTo("#produceUserList_div");
			}, false);
			//获取项目的人员配置信息
			
			
			var index = layer.open({
				title : '人员配置',
				maxmin : false,
				type : 1,
				content : $('#win-setting-object')
			});
			layer.full(index);
		}
		function deleteMe(thisObj){
			$(thisObj).parent().remove();
		}
	</script>
</body>

</html>